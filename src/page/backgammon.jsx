import React, { Component } from 'react';import { message, Input, Button, List, Row, Col, Tag } from 'antd';/** * 五子棋对战 * */class Backgammon extends Component {	constructor ( props ) {		super( props );		this.state = {			value: '',			onLineList: []		};		this.webSocket = null;	}	componentDidMount () {		this.webSocket = this.createWebSocket( `ws://172.16.92.7:3000` );		this.webSocket.onopen = () => message.success( '连接成功' );		this.webSocket.onmessage = this.dealMessage.bind( this );	}	createWebSocket ( urlValue ) {		if ( window.WebSocket ) return new WebSocket( urlValue );		message.error( '对不起，您的浏览器不支持websocket' );		return false;	}	dealMessage ( msg ) {		console.log( JSON.parse( msg.data ) );		const { type, data } = JSON.parse( msg.data );		switch ( type ) {			case 'onLineIpList':				this.setState( { onLineList: data } );		}	}	handleSend () {		this.webSocket.send( 111 )	}	handleChange ( e ) {		this.setState( { value: e.target.value } );	}	render () {		const { value, onLineList } = this.state;		return (			<Row>				<Col span={ 18 }>					<Input value={ value } onChange={ this.handleChange.bind( this ) }/>					<Button onClick={ this.handleSend.bind( this ) }>发送</Button>				</Col>				<Col span={ 6 }>					<List						header={ <div>在线列表</div> }						bordered						size="small"						dataSource={ onLineList }						renderItem={ item => (							<List.Item>								{ item.ip }								{ item.isUser && <Tag color="#f50" style={ { float: "right" } }>我</Tag> }								{ !item.isUser && <Button size="small" style={ { float: "right" } }>聊天</Button> }							</List.Item>						) }					/>				</Col>			</Row>		);	}}export default Backgammon;