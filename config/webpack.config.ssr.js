const webpack = require( 'webpack' );const nodeExternals = require( 'webpack-node-externals' );const utils = require( './utils' );const mode = 'production';const APP_PATH = utils.APP_PATH;const webpackConfig = {	entry: {		main: utils.resolve( 'src/ssr/index.js' ),	},	target: 'node',	mode,	output: {		path: utils.resolve( 'dist/node' ),		filename: '[name].js',		libraryExport: 'default',		libraryTarget: 'commonjs2',	},	externals: [		nodeExternals( {			whitelist: [				/\.(?!(?:jsx?|json)$).{1,5}$/i,			],		} ),	],	resolve: { extensions: [ '.js', '.jsx' ] },	module: {		rules: [			utils.getBabelLoader( true, false ),			...utils.getAllStyleRelatedLoaders(				false,				false,				false,				undefined,				true,			),			utils.getImageLoader( false, APP_PATH ),			utils.getMediaLoader( false, APP_PATH ),		],	},	plugins: [		new webpack.LoaderOptionsPlugin( {			debug: false,			minimize: true,			options: {				context: APP_PATH,			},		} ),	],};module.exports = webpackConfig;