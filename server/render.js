import React from "react";import { renderToString } from 'react-dom/server';import Loadable from 'react-loadable';import { getBundles } from 'react-loadable/webpack';import { Helmet } from 'react-helmet';import App from "../src/app";import stats from '../dist/react-loadable.json';const template = () => {	let modules = [];	const helmet = Helmet.renderStatic();	const app = renderToString(		<Loadable.Capture report={ moduleName => modules.push( moduleName ) }>			<App/>		</Loadable.Capture>	);	const bundles = getBundles( stats, modules );	const scriptFiles = bundles.filter( bundle => bundle.file.endsWith( '.js' ) );	const styleFiles = bundles.filter( bundle => bundle.file.endsWith( '.css' ) );	const scripts = scriptFiles.map( script => `<script src="/${ script.file }"></script>` ).join( '\n' );	const styles = styleFiles.map( style => `<link href="/${ style.file }" rel="stylesheet"/>` ).join( '\n' );	return `		<!DOCTYPE html>		<html ${ helmet.htmlAttributes.toString() }>		  <head>		    ${ helmet.meta.toString() }		    ${ helmet.title.toString() }		    ${ helmet.link.toString() }		    ${ styles }		  </head>		  <body>		    <div id="root">${ app }</div>		  </body>		  <script>window.main();</script>		  ${ scripts }		</html>	`}const render = async ( ctx ) => {	ctx.body = template();	ctx.type = 'html';}module.exports = render;